///*
// * dwm1000.h
// *
// *  Created on: Feb 16, 2026
// *      Author: Aneek Mubarak
// */
//
#ifndef INC_DWM1000_H_
#define INC_DWM1000_H_

#include "main.h"
#include <stdint.h>
#include <string.h>  // for memcpy if needed

/* ------------------------------
   DWM Module Structure
   ------------------------------
   This struct represents one DWM module (DW1000).
   Fields included:
   - CS (chip select) GPIO port and pin
   - RESET GPIO port and pin
   - Optional: last read device ID
--------------------------------*/
typedef struct {
    GPIO_TypeDef *cs_port;       // Chip select port
    uint16_t cs_pin;             // Chip select pin
    GPIO_TypeDef *reset_port;    // Reset port
    uint16_t reset_pin;          // Reset pin
} DWM_Module;

/* ------------------------------
   Function Declarations
--------------------------------*/

/**
 * @brief Reset the DWM module.
 * @param module Pointer to DWM_Module struct
 */
void DWM_Reset(DWM_Module *module);

/**
 * @brief Read a register from the DWM module.
 * @param module Pointer to DWM_Module struct
 * @param reg_id Register ID to read
 * @param data Buffer to store the read data
 * @param len Number of bytes to read
 */
void DWM_ReadReg(DWM_Module *module, uint8_t reg_id, uint8_t *data, uint8_t len);

/**
 * @brief Write data to a register of the DWM module.
 * @param module Pointer to DWM_Module struct
 * @param reg_id Register ID to write
 * @param data Data buffer to write
 * @param len Number of bytes to write
 */
void DWM_WriteReg(DWM_Module *module, uint8_t reg_id, uint8_t *data, uint8_t len);

#endif /* INC_DWM1000_H_ */
